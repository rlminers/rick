<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <script language="javascript" type="text/javascript">
   <!--
      var version = "12.1.0.2.0";
     var swf_base_path = "http://download.oracle.com/otn_software/";

         document.write('<script language="javascript" type="text/javascript" ' +
                        'src="' + swf_base_path + 'emviewers/scripts/activeReportInit.js?' +
                        Math.floor((new Date()).getTime()/(7*24*60*60*1000)) +
                       '"></' + 'script>');
      -->
  </script>
 </head>
 <body onload="sendXML();">
  <script type="text/javascript">
       writeIframe();
     </script>
  <script id="fxtmodel" type="text/xml">
   <!--FXTMODEL-->
   <report db_version="12.1.0.2.0" elapsed_time="1.09" cpu_time="0.29" inst_count="2" cpu_cores="10" hyperthread="Y" timezone_offset="-14400" exa="Y" packs="2" encode="base64" compress="zlib">
    <report_id><![CDATA[/orarep/sqlmonitor/main?inst_id=1&session_id=17970&session_serial=32642&sql_exec_id=16777218&sql_exec_start=04:23:2020 14:09:57&sql_id=cdt2tt36vt4mq]]></report_id>
                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
+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
f2689uL/AKviDyY=
            </report>
   <!--FXTMODEL-->
  </script>
 </body>
</html>


<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

<style>
/* Bootstrap overrides*/

.progress  {
  margin-bottom: 0px;
}

.panel-heading h3 {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: normal;
  padding-top: 8px;
  font-weight: bold;
}

.table>tbody>tr>td {
  vertical-align: middle;
}

.label {
  display: block;
  padding-top: .3em;
  padding-bottom: .3em;
  padding-right: .6em;
  padding-left: .6em;
}

.label-block {
    font-weight: normal;
    font-size: 75%;
    display: block;
    padding-right: 6px;
    padding-left: 6px;
    margin: 0;
    border: 1px solid transparent;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    vertical-align: baseline;
    border-radius: .25em;
    width: 100%;
}

body {
  font-family: Lato;
  /*font-size: 14px;
  line-height: 1.42857143;
  color: #000000;
  background-color: #ffffff;*/
}

.multi-offloaded-name {
  width: 300px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.header-offloaded-name {
  width: 500px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
</style>

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div class="page-header">
        <img alt="Brand" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpzb2RpcG9kaT0iaHR0cDovL3NvZGlwb2RpLnNvdXJjZWZvcmdlLm5ldC9EVEQvc29kaXBvZGktMC5kdGQiIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiBpZD0ic3ZnMiIgdmVyc2lvbj0iMS4xIiBpbmtzY2FwZTp2ZXJzaW9uPSIwLjkxIHIxMzcyNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjEyNC4wOTY5OSIgaGVpZ2h0PSIzOS42NzUyMTMiIHZpZXdCb3g9IjAgMCAxMjQuMDk2OTkgMzkuNjc1MjEiIHNvZGlwb2RpOmRvY25hbWU9ImxvZ28tc21hbGwuc3ZnIj4gIDxtZXRhZGF0YSBpZD0ibWV0YWRhdGE4Ii8+ICA8ZGVmcyBpZD0iZGVmczYiPiAgICA8Y2xpcFBhdGggY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJjbGlwUGF0aDE4Ij4gICAgICA8cGF0aCBkPSJtIDAsODQxLjg5IDExOTAuNTUsMCBMIDExOTAuNTUsMCAwLDAgMCw4NDEuODkgWiIgaWQ9InBhdGgyMCIgaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIvPiAgICA8L2NsaXBQYXRoPiAgPC9kZWZzPiAgPGcgaWQ9ImcxMCIgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIgaW5rc2NhcGU6bGFiZWw9ImdsdWVudCBMb2dvIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjI1LDAsMCwtMS4yNSwtMjguNjgyNjY2LDU3LjU2MDQ4OSkiPiAgICA8ZyBpZD0iZzEyODYwIiB0cmFuc2Zvcm09Im1hdHJpeCgwLjA5Mzc1NTYyLDAsMCwwLjA5Mzc1NTYyLDE2Ljc3NDU1MiwtOS4yODc2NDk1KSI+ICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDU5LjE1NzcsNjM4LjA0NTMpIiBpZD0iZzI2Ii8+ICAgICAgPGcgc3R5bGU9ImZpbGw6IzAwYWU4ZDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJtYXRyaXgoMi4yNTU4NjgxLDAsMCwyLjI1NTg2ODEsMTc0Ljg0NTU5LDM4NC4yNjI4NykiIGlkPSJnMjIiPiAgICAgICAgPHBhdGggaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgaWQ9InBhdGgyNCIgc3R5bGU9ImZpbGw6IzAwYWU4ZDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIgZD0ibSAwLDAgYyAxMC43NDMsMCAxOS40MjUsNy45NDYgMTkuNDI1LDE4LjI0NyAwLDEwLjQ0OCAtOC42ODIsMTguNTQyIC0xOS40MjUsMTguNTQyIC0xMC41OTUsMCAtMTguODM2LC04LjA5NCAtMTguODM2LC0xOC41NDIgQyAtMTguODM2LDcuOTQ2IC0xMC41OTUsMCAwLDAgbSAtMi45NDMsLTMxLjkzMyBjIDYuMDMzLDAgMTEuNDc4LDEuMzI1IDE1LjE1NywzLjgyNyA1LjczOSwzLjk3MiA2LjQ3NSwxMC41OTQgNi40NzUsMTYuMTg2IGwgMCwxLjYxOSBjIC0zLjA5LC01LjE1IC0xMS42MjYsLTguOTc2IC0yMi42NjIsLTguOTc2IC0yMS4wNDMsMCAtMzYuNzg5LDE2LjQ4MSAtMzYuNzg5LDM3LjUyNCAwLDIxLjMzOCAxNS43NDYsMzguNDA4IDM2Ljc4OSwzOC40MDggMTEuMzMxLDAgMjAuMDEzLC00LjU2MiAyMi4wNzMsLTExLjAzNyBsIDAsOS43MTMgMjEuOTI2LDAgMCwtNjEuODA2IGMgMCwtMTUuMzA0IC0yLjA2LC0yNy42NjYgLTEyLjk0OSwtMzYuMiAtNi43NjksLTUuMjk4IC0xNi40ODIsLTguNTM1IC0yNi45MywtOC41MzUgLTE0LjI3NCwwIC0yNi4xOTMsMy4yMzcgLTM2LjM0NywxMC40NDggbCAxMC40NDgsMTUuODkzIGMgNi43NjksLTQuMjY4IDE0LjEyNywtNy4wNjQgMjIuODA5LC03LjA2NCIvPiAgICAgIDwvZz4gICAgICA8cGF0aCBpbmtzY2FwZTpjb25uZWN0b3ItY3VydmF0dXJlPSIwIiBpZD0icGF0aDI4IiBzdHlsZT0iZmlsbDojMDBhZThkO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lIiBkPSJtIDI4My4wNjU0NSw1NzMuMTUwMDkgNDkuNDYyMTYsMCAwLC0xNjkuMzAwNjUgYyAwLC0xNS4yNjk5NyA1LjY0NDE5LC0yMS41NzczNyAxOS4yNTM4NCwtMjEuNTc3MzcgMy42NTIyNSwwIDguMjk5MzQsMC4zMzE2MSAxMS45NTE1OSwxLjMyODcgbCAwLC00My44MjAyMyBjIC00Ljk4MDk2LC0xLjMyODcxIC0xNC42MDY3NSwtMi4zMjM1NSAtMjMuNTY5MzEsLTIuMzIzNTUgLTIzLjU2OTMxLDAgLTU3LjA5ODI4LDcuMzAyMjUgLTU3LjA5ODI4LDU4Ljc1NjM0IGwgMCwxNzYuOTM2NzYgeiIvPiAgICAgIDxnIHN0eWxlPSJmaWxsOiMwMGFlOGQ7ZmlsbC1vcGFjaXR5OjEiIHRyYW5zZm9ybT0ibWF0cml4KDIuMjU1ODY4MSwwLDAsMi4yNTU4NjgxLDM3NS42ODE2OSw1MDkuMDgxNCkiIGlkPSJnMzAiPiAgICAgICAgPHBhdGggaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgaWQ9InBhdGgzMiIgc3R5bGU9ImZpbGw6IzAwYWU4ZDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIgZD0ibSAwLDAgMjEuOTI2LDAgMCwtNDIuMzgxIGMgMCwtOC41MzUgNC40MTUsLTEzLjk4IDEyLjgwMywtMTMuOTggNy45NDYsMCAxMy42ODUsNi4wMzMgMTMuNjg1LDE0LjcxNiBsIDAsNDEuNjQ1IDIxLjkyNiwwIDAsLTQ4LjEyIGMgMCwtNi4wMzMgMS42MTksLTguMjQxIDUuNDQ1LC04LjI0MSAxLjAzLDAgMi42NDksMC4xNDggMy42NzksMC4yOTUgbCAwLC0xOC4yNDggYyAtMi4yMDcsLTAuNzM1IC02LjMyOCwtMS4xNzcgLTkuODYsLTEuMTc3IC0zLjk3MywwIC04LjM4NywwLjU4OSAtMTIuMDY2LDIuNjQ5IC0yLjM1NSwxLjQ3MSAtNS4yOTgsMy44MjYgLTYuNjIyLDcuOTQ2IC0zLjIzOCwtNi4zMjcgLTEwLjMwMSwtMTAuODkgLTIxLjc3OSwtMTAuODkgQyAxMC40NDgsLTc1Ljc4NiAwLC02NC4xNiAwLC00NS4wMyBMIDAsMCBaIi8+ICAgICAgPC9nPiAgICAgIDxnIHN0eWxlPSJmaWxsOiMwMGFlOGQ7ZmlsbC1vcGFjaXR5OjEiIHRyYW5zZm9ybT0ibWF0cml4KDIuMjU1ODY4MSwwLDAsMi4yNTU4NjgxLDY4Ny4wNjUyNiw0NDQuNjgwMjEpIiBpZD0iZzM0Ij4gICAgICAgIDxwYXRoIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIGlkPSJwYXRoMzYiIHN0eWxlPSJmaWxsOiMwMGFlOGQ7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiIGQ9Ik0gMCwwIEMgMCw2Ljc3IC03LjIxMSwxMi4zNjEgLTE2LjA0LDEyLjM2MSAtMjUuNjA1LDEyLjM2MSAtMzMuNDA0LDYuOTE3IC0zMy45OTMsMCBMIDAsMCBaIG0gLTU2LjIxNCwtOC4zODggYyAwLDIzLjY5MiAxNy4wNywzOC44NDkgNDAuMTc0LDM4Ljg0OSAyMi45NTYsMCAzOC4xMTMsLTE2Ljc3NSAzOC4xMTMsLTM3LjY3MiAwLDAgMCwtMy42NzkgLTAuMjk0LC03LjA2MyBsIC01Ni4wNjYsMCBjIDAuNDQxLC04LjgzIDguMDk0LC0xNC41NjkgMTkuNzE5LC0xNC41NjkgNy42NTIsMCAxMi45NDksMi4zNTUgMTguMDk5LDcuMjExIGwgMTIuODAzLC0xMi4yMTQgYyAtOS44NTksLTEwLjE1MyAtMjAuNjAyLC0xMy41MzggLTMxLjkzMywtMTMuNTM4IC0yNC4xMzMsMCAtNDAuNjE1LDE1LjE1NyAtNDAuNjE1LDM4LjQwNyBsIDAsMC41ODkgeiIvPiAgICAgIDwvZz4gICAgICA8ZyBzdHlsZT0iZmlsbDojMDBhZThkO2ZpbGwtb3BhY2l0eToxIiB0cmFuc2Zvcm09Im1hdHJpeCgyLjI1NTg2ODEsMCwwLDIuMjU1ODY4MSw3NTMuNzg5NTUsNTA5LjA4MTQpIiBpZD0iZzM4Ij4gICAgICAgIDxwYXRoIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIGlkPSJwYXRoNDAiIHN0eWxlPSJmaWxsOiMwMGFlOGQ7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiIGQ9Im0gMCwwIDIxLjkyNywwIDAsLTkuMjcxIGMgMy4wOSw2LjQ3NSAxMS4xODMsMTAuODkgMjEuMzM3LDEwLjg5IDE4LjEsMCAyOC4xMDcsLTExLjYyNSAyOC4xMDcsLTMwLjc1NiBsIDAsLTE4LjY4OSBjIDAsLTUuNDQ0IDEuMDMsLTcuNzk5IDQuODU2LC03Ljc5OSAwLjg4MywwIDIuMDYsMC4xNDcgMi4zNTUsMC4xNDcgbCAwLC0xOC41NDEgYyAtMC43MzYsLTAuMjk1IC0zLjgyNiwtMS4wMyAtOS41NjUsLTEuMDMgLTExLjc3MywwIC0xOS41NzMsNS41OTEgLTE5LjU3MywyMS4xOSBsIDAsMjIuMDczIGMgMCw4LjUzNiAtNC41NjEsMTMuOTggLTEzLjI0MywxMy45OCAtOC4yNDEsMCAtMTQuMjc0LC02LjAzMyAtMTQuMjc0LC0xNC43MTUgbCAwLC00MS42NDYgTCAwLC03NC4xNjcgMCwwIFoiLz4gICAgICA8L2c+ICAgICAgPGcgc3R5bGU9ImZpbGw6IzAwYWU4ZDtmaWxsLW9wYWNpdHk6MSIgdHJhbnNmb3JtPSJtYXRyaXgoMi4yNTU4NjgxLDAsMCwyLjI1NTg2ODEsOTUxLjMwNTkyLDQ2NC4yNjU4OCkiIGlkPSJnNDIiPiAgICAgICAgPHBhdGggaW5rc2NhcGU6Y29ubmVjdG9yLWN1cnZhdHVyZT0iMCIgaWQ9InBhdGg0NCIgc3R5bGU9ImZpbGw6IzAwYWU4ZDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZSIgZD0ibSAwLDAgLTkuNzEyLDAgMCwxOS44NjYgOS43MTIsMCAwLDI4LjQwMSAyMS4zMzgsMCAwLC0yOC40MDEgMTYuNDgxLDAgMCwtMTkuODY2IC0xNi40ODEsMCAwLC0yNi40ODggYyAwLC03LjIxMSAyLjk0MywtOS44NTkgOS40MTgsLTkuODU5IDEuNjE5LDAgMy42NzksMC4yOTQgNS41OTIsMC41ODkgbCAwLC0xOS40MjUgYyAtMi41MDIsLTAuNTg5IC02LjYyMiwtMS4wMyAtMTAuNzQzLC0xLjAzIEMgMTQuNzE2LC01Ni4yMTMgMCwtNTIuOTc2IDAsLTI5LjcyNSBMIDAsMCBaIi8+ICAgICAgPC9nPiAgICAgIDxnIHN0eWxlPSJmaWxsOiMwMGFlOGQ7ZmlsbC1vcGFjaXR5OjEiIHRyYW5zZm9ybT0ibWF0cml4KDIuMjU1ODY4MSwwLDAsMi4yNTU4NjgxLDEwODAuNDM4OCwzOTIuNTYxNzYpIiBpZD0iZzQ2Ij4gICAgICAgIDxwYXRoIGlua3NjYXBlOmNvbm5lY3Rvci1jdXJ2YXR1cmU9IjAiIGlkPSJwYXRoNDgiIHN0eWxlPSJmaWxsOiMwMGFlOGQ7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlOm5vbmUiIGQ9Im0gMCwwIGMgNi40NzUsMCAxMi4wNjYsLTUuMjk4IDEyLjA2NiwtMTEuOTE5IDAsLTYuNjIyIC01LjU5MSwtMTEuOTIgLTEyLjA2NiwtMTEuOTIgLTYuNDc2LDAgLTEyLjA2Nyw1LjI5OCAtMTIuMDY3LDExLjkyIEMgLTEyLjA2NywtNS4yOTggLTYuNDc2LDAgMCwwIi8+ICAgICAgPC9nPiAgICA8L2c+ICA8L2c+PC9zdmc+">
        <span class="lead"><strong style="vertical-align: middle;">end-to-end profile</strong></span>
      </div>
      <div id="profile-html"></div>
    </div>
  </div>

  <script>
    function round_0(v) {return Math.floor(v);}
    function round_1(v) {return Math.floor(v * 10) / 10;}
    function round_2(v) {return Math.floor(v * 100) / 100;}
    function round_3(v) {return Math.floor(v * 1000) / 1000;}

    function bFormatter(num, digits, byte_flag) {
      var si = [
        { value: 1E18, symbol: "E" },
        { value: 1E15, symbol: "P" },
        { value: 1E12, symbol: "T" },
        { value: 1E9,  symbol: "G" },
        { value: 1E6,  symbol: "M" },
        { value: 1E3,  symbol: "k" }
      ], i;
      for (i = 0; i < si.length; i++) {
        if (num >= si[i].value) {
          return (num / si[i].value).toFixed(digits).replace(/\.0+$|(\.[0-9]*[1-9])0+$/, "$1") + si[i].symbol;
        }
      }
      return num.toString();
    }

    function nFormatter(num, digits, byte_flag) {
        var units = ['k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],
            decimal;
        var divisor = byte_flag ? 1024 : 1000;

        for(var i=units.length-1; i>=0; i--) {
            decimal = Math.pow(divisor, i+1);

            if(num <= -decimal || num >= decimal) {
                return +(num / decimal).toFixed(digits) + units[i];
            }
        }

        return num;
    }

    function query_has_predicate(sql) {
      // crude predicate detection
      if(sql.indexOf('WHERE') == -1) return false;

      var s = sql.replace(/.*WHERE/, '');
      s = s.split('AND');
      for(var i = 0; i < s.length; ++s) {
        if(s[i].indexOf('1=1') < 0 && s[i].indexOf('offload_bucket_id') < 0) return true;
      }
      return false;
    }

    function backend_query_context(query_engine, query_id) {
      var bqc={};
      if (typeof query_id != 'undefined') {
        bqc.query_id = query_id;
      }
      if (typeof query_engine != 'undefined') {
        bqc.query_engine = query_engine;
      } else {
        if (typeof query_id != 'undefined') {
          bqc.query_engine = (query_id.indexOf("hive_") == 0 ? 'HIVE' : 'IMPALA');
        }
      }
      if (bqc.query_engine) {
        bqc.query_engine_title = bqc.query_engine.charAt(0).toUpperCase() + bqc.query_engine.slice(1).toLowerCase();
      }
      else {
        bqc.query_engine_title = 'Backend';
      }
      return bqc;
    }

    var empty_log = 'No log file content found';
    var empty_sql = 'Query not found in trace file';
    var empty_plan = 'Plan not found - query may not have finished';
    var no_tables = 'No offloaded tables in execution plan';
    var no_display_sql = 'No alternative SQL found to display'

    function sqlmon_section(section_id, td) {
      td.oracle_read_rows = td.connect_write_rows;
      td.connect_read_bytes = td.connect_write_bytes; // due to /proc/self/net/dev limitations - temporary but realistic

      console.log(section_id + ':', td);

      var bqc = backend_query_context(td.QUERY_ENGINE, td.QUERY_ID);

      var subtable_html = '<div class="panel panel-default"><div class="panel-heading">';

      if(section_id == 0) {
        subtable_html += '<h2 class="panel-title pull-left">' + td.table_name + '</h2><div class="span10"><div class="btn-toolbar">';
      } else {
        subtable_html += '<h3 class="panel-title pull-left"><abbr title="' + td.table_name + '"><p class="header-offloaded-name">' + td.table_name + '</p></abbr></h3><div class="span10"><div class="btn-toolbar">';
      }

      if(td.conn_log_file_content) {
        subtable_html += '<button class="btn btn-info pull-right" data-toggle="collapse" data-target="#log-' + section_id + '">Log</button>';
      }

      if(td.hadoop_sql) {

        if(td.hs2_host && bqc.query_engine) {
          var backend_execution_url = '&ensp;<a href="http://' + td.hs2_host;
          if (bqc.query_engine == 'IMPALA') {
            if (bqc.query_id) {
              backend_execution_url += ':25000/query_summary?query_id=' + bqc.query_id;
            } else {
              backend_execution_url += ':25000/queries';
            }
          } else if (bqc.query_engine == 'HIVE') {
            if (bqc.query_id) {
              backend_execution_url += ':8080/#/main/view/TEZ/tez_cluster_instance?viewPath=/#/query/' + bqc.query_id;
            } else {
              backend_execution_url += ':8080/#/main/view/TEZ/tez_cluster_instance';
            }
          }
          subtable_html += backend_execution_url + '" target="_blank" class="btn btn-info pull-right">Backend Execution&ensp;<span class="glyphicon glyphicon-new-window"></span></a>';
        }

        subtable_html += '<button class="btn btn-info pull-right" data-toggle="collapse" data-target="#jfpd-' + section_id + '">Join Filter Pulldown</button>';
        subtable_html += '<button class="btn btn-info pull-right" data-toggle="collapse" data-target="#rewrite-' + section_id + '">Rewrite</button>';
        subtable_html += '<button class="btn btn-info pull-right" data-toggle="collapse" data-target="#plan-' + section_id + '">Plan</button>';

        if(query_has_predicate(td.hadoop_sql)) {
          subtable_html += '<button class="btn btn-info pull-right" data-toggle="collapse" data-target="#query-' + section_id + '">Query</button>';
        } else {
          subtable_html += '<button class="btn btn-warning pull-right" data-toggle="collapse" data-target="#query-' + section_id + '">Query&ensp;<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span></button>';
        }

        subtable_html += '<div class="clearfix"></div>';
      }

      subtable_html += '</div></div></div><div class="panel"><div class="panel-body">';

      subtable_html += '<div>';
      var table = '<table class="table"><thead><tr><th class="text-center col-md-4">&nbsp</th><th class="text-center col-md-2">Start</th><th class="text-center col-md-2">Execute</th><th class="text-center col-md-2">Fetch</th><th class="text-center col-md-2">Finish</th></tr></thead><tbody>';

      if (section_id > 0) {

        var fields = [
          [td.tot_in_connector, 'fa fa-check', 'success', 'Connected', td.tot_not_in_connector, 'fa fa-spinner fa-spin', 'warning', 'Connecting...'],
          [td.tot_done_exec, 'fa fa-check', 'success', 'Executed', td.tot_not_done_exec, 'fa fa-spinner fa-spin', 'warning', 'Executing...'],
          [td.tot_done_fetch, 'fa fa-check', 'success', 'Fetched', td.tot_not_done_fetch, 'fa fa-spinner fa-spin', 'warning', 'Fetching...'],
          [td.tot_done_stats, 'fa fa-check', 'success', 'Finished', td.tot_not_done_stats, 'fa fa-spinner fa-spin', 'warning', 'Finishing...']];

          var expected = td.NUM_BUCKETS ? td.NUM_BUCKETS : '?';
          var row = '<tr><td class="text-left col-md-4"><b>Connector Operation Status</b></td>';

          //it's possible this plan line hasn't even begun yet in which case we will have no variables to compute
          //so show a manual row
          if (typeof td.tot_in_connector != 'undefined') {
            for(f = 0; f < fields.length; ++f) {
            var c, p, t, r;

            if (td.NUM_BUCKETS) {
              r = td.NUM_BUCKETS;
              if (fields[f][0] == td.NUM_BUCKETS) {
                c = fields[f][2];
                p = fields[f][1];
                t = fields[f][3];
              }
              else {
                c = fields[f][6];
                p = fields[f][5];
                t = fields[f][7];
              }
            }
            else {
              c = 'info';
              p = fields[f][5];
              t = fields[f][7];
              r = '?'
            }

            row += '<td class="text-center col-md-2"><span class="label label-' + c + '"><i class="' + p + '"></i> ' + t + ' <span class="badge">' + fields[f][0] + ' / ' + r + '</span></span></td>';

            }
          }
          else {
            if ((td.plan_line_execution_status == 'EXEC_DONE') && (!('QUERY' in td))) {
                row += '<td class="text-center col-md-8" colspan="4"><span class="label label-success"><i class="fa fa-check"></i> Oracle execution plan line not executed</span></td>';
            } else {
                row += '<td class="text-center col-md-8" colspan="4"><span class="label label-primary"><i class="fa fa-spinner fa-spin"></i> Initializing / Waiting for Oracle Request...</span></td>';
            }
          }

        table += row;

        table += '</tr>';

        //timings
        var fields = [
          [td.pre_min_delta_secs, td.pre_avg_delta_secs, td.pre_max_delta_secs],
          [td.execute_min_delta_secs, td.execute_avg_delta_secs, td.execute_max_delta_secs],
          [td.fetch_min_delta_secs, td.fetch_avg_delta_secs, td.fetch_max_delta_secs],
          [td.stats_min_delta_secs, td.stats_avg_delta_secs, td.stats_max_delta_secs]];

        var row = '<tr><td class="text-left col-md-4" style="vertical-align: top;"><b>Connector Operation Timings</b></td>';

        if (typeof td.tot_in_connector != 'undefined') {
            for(f = 0; f < fields.length; ++f) {

              var min, avg, max;

              if(typeof fields[f][0] != 'undefined') {
                if(fields[f][0] > 0) {
                  min = parseFloat((fields[f][0] * 100) / 100).toFixed(2);
                } else {
                  min = '0.00';
                }
              } else {
                min = '?';
              }

              if(typeof fields[f][1] != 'undefined') {
                if(fields[f][1] > 0) {
                  avg = parseFloat((fields[f][1] * 100) / 100).toFixed(2);
                } else {
                  avg = '0.00';
                }
              } else {
                avg = '?';
              }

              if(typeof fields[f][2] != 'undefined') {
                if(fields[f][2] > 0) {
                  max = parseFloat((fields[f][2] * 100) / 100).toFixed(2);
                } else {
                  max = '0.00';
                }
              } else {
                max = '?';
              }

              row += '<td class="text-center col-md-2">';
              row += '<table class="table"><tbody><tr><td class="text-center col-md-3" style="border-top: 0px; padding-top: 3px;"><span class="label label-success" title="Lowest time">' + min + 's</span></td><td class="text-center col-md-3" style="border-top: 0px; padding-top: 3px;"><span class="label label-primary" title="Average time">' + avg + 's</span></td><td class="text-center col-md-3" style="border-top: 0px; padding-top: 3px;"><span class="label label-warning" title="Highest time">' + max + 's</span></td></td></tr></tbody></table></td>';

              //<div class="row"><div class="col-md-2"></div><div class="col-md-3"><span class="label label-success">' + min + 's</span></div><div class="col-md-3"><span class="label label-primary">' + avg + 's</span></div><div class="col-md-3"><span class="label label-warning">' + max + 's</span></div><div class="col-md-1"></div></div></td>';
            }
        }
        else {
          if ((td.plan_line_execution_status == 'EXEC_DONE') && (!('QUERY' in td))) {
                row += '<td class="text-center col-md-8" colspan="4"><span class="label label-success"><i class="fa fa-check"></i> Oracle execution plan line not executed</span></td>';
          } else {
                row += '<td class="text-center col-md-8" colspan="4"><span class="label label-primary"><i class="fa fa-spinner fa-spin"></i> Initializing / Waiting for Oracle Request...</span></td>';
          }
        }

        table += row;

        table += '</tr>';

      }
      else {
        //var table_keys = Object.keys(d);
        //table_keys.sort();

        for(i = 0; i < table_keys.length; ++i) {
          var table_id = table_keys[i], te = d[table_id];

          var fields = [
          [te.tot_in_connector, 'fa fa-check', 'success', 'Connected', te.tot_not_in_connector, 'fa fa-spinner fa-spin', 'warning', 'Connecting...'],
          [te.tot_done_exec, 'fa fa-check', 'success', 'Executed', te.tot_not_done_exec, 'fa fa-spinner fa-spin', 'warning', 'Executing...'],
          [te.tot_done_fetch, 'fa fa-check', 'success', 'Fetched', te.tot_not_done_fetch, 'fa fa-spinner fa-spin', 'warning', 'Fetching...'],
          [te.tot_done_stats, 'fa fa-check', 'success', 'Finished', te.tot_not_done_stats, 'fa fa-spinner fa-spin', 'warning', 'Finishing...']];

          var expected = te.NUM_BUCKETS ? te.NUM_BUCKETS : '?';
          var row = '<tr><td class="text-left col-md-4"><abbr title="' + te.table_name + '"><p class="multi-offloaded-name">' + te.table_name + '</abbr></p></td>';

          //it's possible this plan line hasn't even begun yet in which case we will have no variables to compute
          //so show a manual row
          if (typeof te.tot_in_connector != 'undefined') {
            for(f = 0; f < fields.length; ++f) {
            var c, p, t, r;

            if (te.NUM_BUCKETS) {
              r = te.NUM_BUCKETS;
              if (fields[f][0] == te.NUM_BUCKETS) {
                c = fields[f][2];
                p = fields[f][1];
                t = fields[f][3];
              }
              else {
                c = fields[f][6];
                p = fields[f][5];
                t = fields[f][7];
              }
            }
            else {
              c = 'info';
              p = fields[f][5];
              t = fields[f][7];
              r = '?'
            }

            row += '<td class="text-center col-md-2"><span class="label label-' + c + '"><i class="' + p + '"></i> ' + t + ' <span class="badge">' + fields[f][0] + ' / ' + r + '</span></span></td>';

            }
          }
          else {
            if ((te.plan_line_execution_status == 'EXEC_DONE') && (!('QUERY' in te))) {
                row += '<td class="text-center col-md-8" colspan="4"><span class="label label-success"><i class="fa fa-check"></i> Oracle execution plan line not executed</span></td>';
            } else {
                row += '<td class="text-center col-md-8" colspan="4"><span class="label label-primary"><i class="fa fa-spinner fa-spin"></i> Initializing / Waiting for Oracle Request...</span></td>';
            }
          }

        table += row;

        table += '</tr>';
        }

        var tot_pre_min = 0, tot_pre_avg = 0, tot_pre_max = 0;
        var tot_exec_min = 0, tot_exec_avg = 0, tot_exec_max = 0;
        var tot_fetch_min = 0, tot_fetch_avg = 0, tot_fetch_max = 0;
        var tot_stats_min = 0, tot_stats_avg = 0, tot_stats_max = 0;

        for(i = 0; i < table_keys.length; ++i) {
          var table_id = table_keys[i], te = d[table_id];

          if(te.pre_min_delta_secs) { tot_pre_min += te.pre_min_delta_secs; }
          if(te.pre_avg_delta_secs) { tot_pre_avg += te.pre_avg_delta_secs; }
          if(te.pre_max_delta_secs) { tot_pre_max += te.pre_max_delta_secs; }

          if(te.execute_min_delta_secs) { tot_exec_min += te.execute_min_delta_secs; }
          if(te.execute_avg_delta_secs) { tot_exec_avg += te.execute_avg_delta_secs; }
          if(te.execute_max_delta_secs) { tot_exec_max += te.execute_max_delta_secs; }

          if(te.fetch_min_delta_secs) { tot_fetch_min += te.fetch_min_delta_secs; }
          if(te.fetch_avg_delta_secs) { tot_fetch_avg += te.fetch_avg_delta_secs; }
          if(te.fetch_max_delta_secs) { tot_fetch_max += te.fetch_max_delta_secs; }

          if(te.stats_min_delta_secs) { tot_stats_min += te.stats_min_delta_secs; }
          if(te.stats_avg_delta_secs) { tot_stats_avg += te.stats_avg_delta_secs; }
          if(te.stats_max_delta_secs) { tot_stats_max += te.stats_max_delta_secs; }
        }

        var row = '<tr><td class="text-left col-md-4" style="vertical-align: top;"><b>Total Connector Operation Timings</b></td>';

        var fields = [
          [tot_pre_min, tot_pre_avg, tot_pre_max],
          [tot_exec_min, tot_exec_avg, tot_exec_max],
          [tot_fetch_min, tot_fetch_avg, tot_fetch_max],
          [tot_stats_min, tot_stats_avg, tot_stats_max]];

        if ((typeof te.tot_in_connector != 'undefined') || ((te.plan_line_execution_status == 'EXEC_DONE') && (!('QUERY' in te)))) {

            for(f = 0; f < fields.length; ++f) {

              var min, avg, max;

              if(typeof fields[f][0] != 'undefined') {
                if(fields[f][0] > 0) {
                  min = parseFloat((fields[f][0] * 100) / 100).toFixed(2);
                } else {
                  min = '0.00';
                }
              } else {
                min = '?';
              }

              if(typeof fields[f][1] != 'undefined') {
                if(fields[f][1] > 0) {
                  avg = parseFloat((fields[f][1] * 100) / 100).toFixed(2);
                } else {
                  avg = '0.00';
                }
              } else {
                avg = '?';
              }

              if(typeof fields[f][2] != 'undefined') {
                if(fields[f][2] > 0) {
                  max = parseFloat((fields[f][2] * 100) / 100).toFixed(2);
                } else {
                  max = '0.00';
                }
              } else {
                max = '?';
              }

              row += '<td class="text-center col-md-2">';
              row += '<table class="table"><tbody><tr><td class="text-center col-md-3" style="border-top: 0px; padding-top: 3px;"><span class="label label-success" title="Minimum time">' + min + 's</span></td><td class="text-center col-md-3" style="border-top: 0px; padding-top: 3px;"><span class="label label-primary">' + avg + 's</span></td><td class="text-center col-md-3" style="border-top: 0px; padding-top: 3px;"><span class="label label-warning">' + max + 's</span></td></td></tr></tbody></table></td>';

              //<div class="row"><div class="col-md-2"></div><div class="col-md-3"><span class="label label-success">' + min + 's</span></div><div class="col-md-3"><span class="label label-primary">' + avg + 's</span></div><div class="col-md-3"><span class="label label-warning">' + max + 's</span></div><div class="col-md-1"></div></div></td>';
            }
        }
        else {
          row += '<td class="text-center col-md-8" colspan="4"><span class="label label-primary"><i class="fa fa-spinner fa-spin"></i> Waiting for all operations to complete...</span></td>';
        }


        table += row;

        table += '</tr>';


      }

      table += '</tbody></table>';
      subtable_html += table + '</div>';

      if(td.conn_log_file_content) {
        subtable_html += '<div id="log-' + section_id + '" class="collapse"><pre>' + (td.conn_log_file_content ? 'Last 30 lines from ' + td.conn_log_file_name + ':<br>' + td.conn_log_file_content : empty_log) + '</pre></div>';
      }

      if(td.hadoop_sql) {
        subtable_html += '<div id="query-' + section_id + '" class="collapse"><pre>' + (td.hadoop_sql ? td.hadoop_sql : empty_sql) + '</pre></div>';
        subtable_html += '<div id="plan-' + section_id + '" class="collapse"><pre>' + (td.plan ? td.plan : empty_plan) + '</pre></div>';

        if(td.oracle_sql_after_rewrite || td.oracle_sql_before_rewrite) {
          subtable_html += '<div id="rewrite-' + section_id + '" class="collapse"><pre>' + "Rewritten SQL\n=============\n" + td.oracle_sql_after_rewrite.replace(/<br>/g, '\n') + "\n\nOriginal SQL\n============\n" + td.oracle_sql_before_rewrite.replace(/<br>/g, '\n') +  '</pre></div>';
        } else {
          subtable_html += '<div id="rewrite-' + section_id + '" class="collapse"><pre>No SQL rewrite</pre></div>';
        }
        if(td.oracle_join_filter_pulldown) {
          subtable_html += '<div id="jfpd-' + section_id + '" class="collapse"><pre>' + td.oracle_join_filter_pulldown.replace(/<br>/g, '\n') +  '</pre></div>';
        } else {
          subtable_html += '<div id="jfpd-' + section_id + '" class="collapse"><pre>No join filter pulldown information available</pre></div>';
        }
      }


      if(td.connect_read_bytes) {
        var max_bytes = Math.max(td.connect_write_bytes, td.oracle_write_bytes, td.connect_read_bytes, td.hadoop_read_bytes, td.hadoop_write_bytes, 0.01);
        var max_rows = Math.max(td.oracle_read_rows, td.oracle_write_rows, td.connect_read_rows, td.hadoop_read_rows, td.hadoop_write_rows, 0.01);
        var max_cpu_secs = Math.max(td.oracle_cpu_secs, td.connect_cpu_secs, td.hadoop_cpu_secs, 0.01);

        var table = '<table class="table table-hover"><thead><tr><th></th><th class="text-right">Rows</th><th></th><th class="text-right">Bytes</th><th></th><th class="text-right">Bytes per Row</th></tr></thead><tbody>';

        var fields = [
          ['Oracle received', td.oracle_read_rows, td.connect_write_bytes, 'danger'],
          ['Connector received', td.connect_read_rows, td.connect_read_bytes, 'info']];

        if(td.hadoop_write_rows > 0 && td.hadoop_write_bytes > 0 && td.hadoop_read_rows > 0 && td.hadoop_read_bytes > 0) {
          fields.push([bqc.query_engine_title + ' QC received', td.hadoop_write_rows, td.hadoop_write_bytes, 'success']);
          fields.push([bqc.query_engine_title + ' scanned', td.hadoop_read_rows, td.hadoop_read_bytes, 'success']);
        }

        for(f = 0; f < fields.length; ++f) {
          var name = fields[f][0], rows = fields[f][1] || 0, bytes = fields[f][2] || 0, colour = fields[f][3];
          var row_pc = rows ? (100 * rows / max_rows) : '';
          var byte_pc = bytes ? (100 * bytes / max_bytes) : '';

          var row = '<tr><td>' + name + '</td>';
          row += '<td class="text-right">' + nFormatter(rows, 2, false) + '</td>';
          row += '<td><div class="progress" style="width:200px"><div class="progress-bar progress-bar-' + colour + '" style="width: ' + row_pc + '%"></div></div></td>';
          row += '<td class="text-right">' + nFormatter(bytes, 2, true) + '</td>';
          row += '<td><div class="progress" style="width:200px"><div class="progress-bar progress-bar-' + colour + '" style="width: ' + byte_pc + '%"></div></div></td>';
          if(rows != 0) {
            row += '<td class="text-right">' + nFormatter(round_0(bytes / rows), 2, true) + '</td>';
          } else {
            row += '<td class="text-right"></td>';
          }
          row += '</tr>';

          table += row;
        }

        table += '</tbody></table>';
        subtable_html += table;

        subtable_html += '<div class="row"><div class="col-xs-9">';

        table = '<table class="table table-hover"><thead><tr><th></th><th class="text-right">CPU Seconds</th><th></th><th class="text-right">Rows per CPU Second</th></tr></thead><tbody>';

        fields = [['Oracle CPU', td.oracle_cpu_secs, 'danger'], ['Connector CPU', td.connect_cpu_secs, 'info']];
        if(td.hadoop_cpu_secs > 0) fields.push([bqc.query_engine_title + ' CPU', td.hadoop_cpu_secs, 'success']);

        for(f = 0; f < fields.length; ++f) {
          var name = fields[f][0], cpu = fields[f][1] || 0, colour = fields[f][2];
          var cpu_pc = cpu ? (100 * cpu / max_cpu_secs) : '';

          var row = '<td>' + name + '</td><td class="text-right">' + round_3(cpu) + '</td>';
          row += '<td><div class="progress" style="width:200px"><div id="o_c" class="progress-bar progress-bar-' + colour + '" style="width: ' + cpu_pc + '%"></div></div></td>';
          if(f == 0 && cpu != 0) {
            var rows_per_cpu_sec = round_0(td.oracle_read_rows / cpu);
            row += '<td class="text-right">' + rows_per_cpu_sec + '</td>';
          } else {
            row += '<td></td>';
          }
          table += '<tr>' + row + '</tr>';
        }

        table += '</tbody></table>';
        subtable_html += table + '</div></div></div></div></div></div>';
      } else {
        subtable_html += '</div></div></div></div>';
      }

      //table += '';
      //subtable_html += '</div></div></div></div>';

      return subtable_html;
    }

    function escape(s) {
      var n = s;
      n = n.replace(/&/g, "&amp;");
      n = n.replace(/</g, "&lt;");
      n = n.replace(/>/g, "&gt;");
      n = n.replace(/"/g, "&quot;");

      return n;
    }

    function diffString( o, n ) {
      /*
       * Javascript Diff Algorithm
       *  By John Resig (http://ejohn.org/)
       *  Modified by Chu Alan "sprite"
       *
       * Released under the MIT license.
       *
       * More Info:
       *  http://ejohn.org/projects/javascript-diff-algorithm/
       */

      function diff( o, n ) {
        var ns = new Object();
        var os = new Object();

        for ( var i = 0; i < n.length; i++ ) {
          if ( ns[ n[i] ] == null )
            ns[ n[i] ] = { rows: new Array(), o: null };
          ns[ n[i] ].rows.push( i );
        }

        for ( var i = 0; i < o.length; i++ ) {
          if ( os[ o[i] ] == null )
            os[ o[i] ] = { rows: new Array(), n: null };
          os[ o[i] ].rows.push( i );
        }

        for ( var i in ns ) {
          if ( ns[i].rows.length == 1 && typeof(os[i]) != "undefined" && os[i].rows.length == 1 ) {
            n[ ns[i].rows[0] ] = { text: n[ ns[i].rows[0] ], row: os[i].rows[0] };
            o[ os[i].rows[0] ] = { text: o[ os[i].rows[0] ], row: ns[i].rows[0] };
          }
        }

        for ( var i = 0; i < n.length - 1; i++ ) {
          if ( n[i].text != null && n[i+1].text == null && n[i].row + 1 < o.length && o[ n[i].row + 1 ].text == null &&
               n[i+1] == o[ n[i].row + 1 ] ) {
            n[i+1] = { text: n[i+1], row: n[i].row + 1 };
            o[n[i].row+1] = { text: o[n[i].row+1], row: i + 1 };
          }
        }

        for ( var i = n.length - 1; i > 0; i-- ) {
          if ( n[i].text != null && n[i-1].text == null && n[i].row > 0 && o[ n[i].row - 1 ].text == null &&
               n[i-1] == o[ n[i].row - 1 ] ) {
            n[i-1] = { text: n[i-1], row: n[i].row - 1 };
            o[n[i].row-1] = { text: o[n[i].row-1], row: i - 1 };
          }
        }

        return { o: o, n: n };
      }

      o = o.replace(/\s+$/, '');
      n = n.replace(/\s+$/, '');

      var out = diff(o == "" ? [] : o.split(/\s+/), n == "" ? [] : n.split(/\s+/) );
      var str = "";

      var oSpace = o.match(/\s+/g);
      if (oSpace == null) {
        oSpace = ["\n"];
      } else {
        oSpace.push("\n");
      }
      var nSpace = n.match(/\s+/g);
      if (nSpace == null) {
        nSpace = ["\n"];
      } else {
        nSpace.push("\n");
      }

      if (out.n.length != 0) {

        for ( var i = 0; i < out.n.length; i++ ) {
          if (out.n[i].text != null) {

            var pre = "";

            for (n = out.n[i].row + 1; n < out.o.length && out.o[n].text == null; n++ ) {
              pre += '<diffq style="background-color: #FFEE00">' + escape(out.o[n]) + oSpace[n] + "</diffq>";
            }
            str += out.n[i].text + nSpace[i] + pre;
          }
        }
      }

      return str;
    }

    function toggle_display_query(section_id, button_id) {
      td = section_id.split('-')[1]

      var new_button_id = (button_id == "display_query" ? "query" : "display_query");
      var new_button_icon = (button_id == "display_query" ? "fa fa-minus-circle" : "fa fa-plus-circle");
      var toggle_button = "WHERE  <button onclick=\"toggle_display_query($(this).closest('div').attr('id'), $(this).attr('id'));\"  id=\"" + new_button_id + "\" class=\"btn btn-info btn-xs\"><i class=\"" + new_button_icon + "\"></i></button>";

      if(button_id == "display_query") {
        var qdiffs = diffString(d[td]["QUERY"], d[td]["DISPLAY_QUERY"]);
        document.getElementById(section_id).innerHTML="<pre>" + (d[td]["QUERY"] ? qdiffs.replace(/WHERE/, toggle_button) : no_display_sql + toggle_button.replace(/WHERE/, '')) +  "</pre>";
      }
      else {
        var qdiffs = diffString(d[td]["DISPLAY_QUERY"], d[td]["QUERY"]);
        document.getElementById(section_id).innerHTML="<pre>" + (d[td]["DISPLAY_QUERY"] ? qdiffs.replace(/WHERE/, toggle_button) : no_display_sql + toggle_button.replace(/WHERE/, '')) +  "</pre>";
      }

      $("diffq").animate({backgroundColor: $("#" + new_button_id).closest('pre').css("background-color")}, 3000)
    }


    var d = {};
    var ss = {};
    d["16"] = {};
d["16"]["plan_line_execution_status"] = "EXEC_DONE";
d["16"]["table_name"] = "ASC1_H.TRACKED_OFFENDER_TRACK_EXT";
d["16"]["oracle_read_bytes"] = 0;
d["16"]["oracle_write_bytes"] = 0;
d["16"]["oracle_write_rows"] = 0;
d["16"]["oracle_cpu_secs"] = 0;
d["16"]["oracle_sql_before_rewrite"] = "";
d["16"]["oracle_sql_after_rewrite"] = "";
ss["oracle_read_bytes"] = 0;
ss["oracle_write_bytes"] = 0;
ss["oracle_read_rows"] = 0;
ss["oracle_write_rows"] = 0;
ss["oracle_cpu_secs"] = 0;


    var table_keys = Object.keys(d);
    //table_keys.sort();

    var profile_html = '';

    if(Object.keys(d).length == 0) {
      profile_html += '<p>' + no_tables + '</p>';
    }

    if(Object.keys(ss).length > 1 && Object.keys(d).length > 1) {
      ss.table_name = 'Summary of ' + Object.keys(d).length + ' external table accesses';
      profile_html += sqlmon_section(0, ss);
    }

    var toggle_button = "WHERE  <button onclick=\"toggle_display_query($(this).closest('div').attr('id'), $(this).attr('id'));\"  id=\"display_query\" class=\"btn btn-info btn-xs\"><i class=\"fa fa-plus-circle\"></i></button>"

    for(i = 0; i < table_keys.length; ++i) {
      var table_id = table_keys[i], td = d[table_id];
      if (typeof td.QUERY != 'undefined') {
        td.QUERY = td.QUERY.replace(/</g,'&lt;').replace(/>/g,'&gt;');
      }
      if (typeof td.DISPLAY_QUERY != 'undefined') {
        td.DISPLAY_QUERY = td.DISPLAY_QUERY.replace(/</g,'&lt;').replace(/>/g,'&gt;');
        td.hadoop_sql = td.DISPLAY_QUERY.replace(/WHERE/, (td.DISPLAY_QUERY != td.QUERY ? toggle_button : 'WHERE'));
      }
      else {
        td.hadoop_sql = td.QUERY;
      }
      if (typeof td.plan != 'undefined') {
        td.plan = td.plan.replace(/</g,'&lt;').replace(/>/g,'&gt;');
      }
      td.hs2_host = td.HS2_HOST;

      profile_html += sqlmon_section(table_id, td);
    }

    document.getElementById("profile-html").innerHTML = profile_html;

  </script>
</div>

